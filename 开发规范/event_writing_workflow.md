# 事件编写工作流程

## 事件创作流程概述

以下是创建《职场苏丹》事件的推荐工作流程，基于三表设计模式：

1. **概念构思**
   - 确定事件主题和核心玩法
   - 确定事件的关键选择和结果
   - 设计事件与游戏进度的关联

2. **基础设计**
   - 确定事件ID和类型
   - 设置触发条件和有效回合
   - 设计事件分支结构
   - 确定UI元素（背景、图标等）

3. **策略设计**
   - 设计玩家策略选择（槽位设计）
   - 设计检定机制和成功/失败条件
   - 平衡奖励和惩罚机制
   - 设计事件链关系

4. **叙事创作**
   - 编写各分支的前置文本
   - 编写成功/失败文本
   - 添加文本变量
   - 设计角色对话和反应

5. **事件关联**
   - 设计事件前置条件
   - 设计后续事件触发逻辑
   - 确认依赖关系的完整性

6. **多语言准备**
   - 确保所有文本支持本地化
   - 创建和测试多语言变量

7. **平衡检查**
   - 检查属性变动平衡性
   - 检查事件链合理性
   - 确认多分支选择的均衡

8. **数据转换**
   - 将事件设计转换为三个表的JSON格式
   - 检查JSON格式的正确性
   - 确认事件链关系的完整性

## 三表设计最佳实践

### 事件表(event_table)设计

- 每个事件必须有唯一的`event_id`
- 合理设置`valid_rounds`和`prerequisite_conditions`
- 注意设置`cooldown`避免事件过于频繁触发
- 设置恰当的`max_occurrences`控制事件触发频率
- 为每个事件提供合适的`icon_path`和`background_path`

### 分支表(branch_table)设计

- 每个分支的文本应保持适当的长度和节奏
- `pre_check_text`应当引导玩家思考策略选择
- `success_text`和`failure_text`的情感差异应明显
- 多个选项的分支应有差异化的文本和结果
- 使用文本变量使叙事更加个性化

### 槽位表(slot_table)设计

- 为每个事件设计多样化的槽位类型
- 检定机制应与叙事逻辑一致
- 合理设置`allowed_card_types`提供策略深度
- 明确的`success_results`和`failure_results`差异
- 慎重设计`next_event_success/failure`以构建连贯的事件链

## 非卡牌选项设计指南

非卡牌选项提供了不使用卡牌的选择路径，有几个关键考虑点：

- 设置明确的`option_text_json`，简洁表达选项内容
- 合理设置固定检定的`success_condition_json`
- 非卡牌选项通常应提供"规避风险但收益较低"的路径
- 确保所有非卡牌选项都有多语言支持

## 事件链设计指南

事件链通过`next_event_success`和`next_event_failure`字段实现：

- 设计事件链时应考虑玩家体验的连贯性
- 避免过长的强制事件链，应留有玩家选择的空间
- 考虑延迟触发来增加叙事的时间跨度感
- 确保事件链不会陷入死循环

## 编写者注意事项

### 叙事一致性

- 保持角色语气和性格的一致性
- 确保事件间的时间连贯性
- 维持公司背景和职场环境的一致性

### 多语言支持

- 所有玩家可见文本都应考虑多语言支持
- 注意不同语言的文本长度可能不同，UI设计应考虑这点

### 均衡性考量

- 高风险选项应有相应的高回报
- 提供多种策略路径，避免单一最优解
- 不同卡牌类型应有各自的用武之地

### 技术限制

- 单个文本段落不应过长（建议不超过150字）
- 事件链深度不应过深（建议不超过5层）
- 单个事件的槽位数量不宜过多（建议不超过4个）

## 质量检查清单

在提交事件设计前，请检查以下项目：

- [ ] 所有必填字段都已完成
- [ ] 三个表之间的ID关联关系正确
- [ ] 所有文本已检查拼写和语法
- [ ] 事件链关系已验证
- [ ] 多语言支持已完成
- [ ] 奖惩平衡已确认
- [ ] JSON格式无语法错误

## 示例工作流

以下是一个简化的事件创建示例：

1. **构思**: 设计一个关于部门会议的事件，玩家可以选择不同的展示方式
2. **设计事件表**: 创建ID为10001的"紧急部门会议"事件
3. **设计分支表**: 创建3个分支 - 自信展示、数据详细和委婉表达
4. **设计槽位表**: 每个分支对应一个卡牌槽位，加上一个"装作路过"的非卡牌选项
5. **编写叙事**: 为每个分支编写文本内容
6. **设置结果**: 设置各分支的成功/失败结果
7. **建立事件链**: 成功的"自信展示"触发后续升职事件
8. **多语言**: 添加英文和日文的选项文本
9. **转换数据**: 将设计转为三表JSON格式
10. **测试验证**: 检查事件逻辑和体验

## 工具资源

以下工具可协助事件创作过程：

- **模板文件**: 在`工具/templates`目录下有各表的模板文件
- **JSON验证器**: 使用`工具/validators/json_validator.py`检查格式
- **事件模拟器**: 使用`工具/simulators/event_simulator.py`测试事件体验
- **事件链可视化工具**: 使用`工具/visualizers/event_chain_visualizer.py`查看事件链 